{% extends 'base.html' %}
<!--break-->
{% load static %}
<!--break-->

{% block title %} Dashboard {% endblock title %}
<!--break-->

{% block subtitle %} Dashboard {% endblock subtitle %}

<!--break-->

{% block content %} {% include "partials/_messages.html" %}

<!--  Row 1 -->
<div class="row">
    {% include "partials/_messages.html" %}

    <div class="col-lg-8 d-flex align-items-strech">
        <div class="card shadow-lg w-100">
            <div class="card-body">
                <div
                    class="d-sm-flex d-block align-items-center justify-content-between mb-9"
                >
                    <div class="mb-3 mb-sm-0">
                        <h5 class="card-title fw-semibold">Tickets Status</h5>
                    </div>
                </div>
                <div id="chart"></div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="row">
            <div class="col-lg-12">
                <!-- Ticket Overview -->
                <div class="card overflow-hidden">
                    <div class="card-body p-4">
                        <h5 class="card-title mb-9 fw-semibold">
                            Ticket Overview
                        </h5>
                        <div class="row align-items-center">
                            <div class="col-4">
                                <div class="d-flex justify-content-center">
                                    <div id="breakup"></div>
                                </div>
                            </div>
                            <div class="ms-3 col-7">
                                <h5 class="fw-semibold mb-3">
                                    Number of Tickets:
                                    <strong>{{no_tickets}} </strong>
                                </h5>

                                <div class="align-items-center">
                                    <div class="me-4">
                                        <span
                                            class="round-8 bg-danger rounded-circle me-2 d-inline-block"
                                        ></span>
                                        <span class="fs-2">Bugs/Errors</span>
                                    </div>
                                    <div>
                                        <span
                                            class="round-8 bg-info rounded-circle me-2 d-inline-block"
                                        ></span>
                                        <span class="fs-2">Other Comments</span>
                                    </div>
                                    <div>
                                        <span
                                            class="round-8 bg-warning rounded-circle me-2 d-inline-block"
                                        ></span>
                                        <span class="fs-2"
                                            >Feature request</span
                                        >
                                    </div>
                                    <div>
                                        <span
                                            class="round-8 bg-success rounded-circle me-2 d-inline-block"
                                        ></span>
                                        <span class="fs-2"
                                            >Traning/documents request</span
                                        >
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <!-- Monthly Earnings -->
                <div class="card">
                    <div class="card-body">
                        <div class="row alig n-items-start">
                            <div class="col-8">
                                <h5 class="card-title mb-9 fw-semibold">
                                    Tickets Priority
                                </h5>
                            </div>
                        </div>
                        <div id="earning"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="col-md-8">
    <!--Recent Actions-->
    <div class="card">
        <div class="card-body p-4">
            <div class="mb-4">
                <h5 class="card-title fw-semibold">Recent Actions</h5>
            </div>
            <ul class="timeline-widget position-relative mb-3">
                {% for history in histories %}
                <li
                    class="timeline-item d-flex position-relative overflow-hidden"
                >
                    <div class="timeline-time text-dark flex-shrink-0 text-end">
                        {{history.date|date}} |
                        <strong> {{history.date|time}}</strong>
                    </div>
                    <div
                        class="timeline-badge-wrap d-flex flex-column align-items-center"
                    >
                        <span
                            class="timeline-badge border-2 border border-primary flex-shrink-0 my-8"
                        ></span>
                        <span
                            class="timeline-badge-border d-block flex-shrink-0"
                        ></span>
                    </div>
                    <div class="timeline-desc fs-3 text-dark mt-n1">
                        {{history.ticket_name}}'s {{history.field}}
                        {{history.action}} from
                        <strong>{{history.old_value}} </strong>to
                        <strong>{{history.new_value}}</strong>
                        <p>by <strong>{{history.user}}</strong></p>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<div class="py-6 px-6 text-center">
    <p class="mb-0 fs-4">
        Developed by
        <a
            href="https://adminmart.com/"
            target="_blank"
            class="pe-1 text-primary text-decoration-underline"
            >Andualem mamo</a
        >
    </p>
</div>

{% endblock content %}
